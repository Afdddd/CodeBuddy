<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="nboardMapper">
	<!-- NBOARD resultMap -->
	<resultMap id="nboardResultSet" type="nboard">
	    <result column="NBOARD_NO" property="nboardNo"/>
	    <result column="NBOARD_TITLE" property="nboardTitle"/>
	    <result column="NBOARD_CONTENT" property="nboardContent"/>
	    <result column="NBOARD_INSERT" property="nboardInsert"/>
	    <result column="NBOARD_UPDATE" property="nboardUpdate"/>
	    <result column="NBOARD_DELETE" property="nboardDelete"/>
	    <result column="NBOARD_VIEWS" property="nboardViews"/>
	</resultMap>
	
	<!-- NATTACHMENT resultMap -->
	<resultMap id="nattachmentResultMap" type="nattachment">
	    <result column="NATTACHMENT_NO" property="nattachmentNo"/>
	    <result column="NBOARD_NO" property="nboardNo"/>
	    <result column="NATTACHMENT_ORIGIN" property="nattachmentOrigin"/>
	    <result column="NATTACHMENT_CHANGE" property="nattachmentChange"/>
	    <result column="NATTACHMENT_PATH" property="nattachmentPath"/>
	    <result column="NATTACHMENT_INSERT" property="nattachmentInsert"/>
	    <result column="NATTACHMENT_LEVEL" property="nattachmentLevel"/>
	</resultMap>
	
	<!-- NBOARD insert -->
	<insert id="insertNboard" parameterType="nboard">
	    INSERT INTO NBOARD (NBOARD_NO, NBOARD_TITLE, NBOARD_CONTENT, NBOARD_INSERT, NBOARD_UPDATE, NBOARD_DELETE, NBOARD_VIEWS)
	    VALUES (SEQ_NBOARD.NEXTVAL, #{nboardTitle}, #{nboardContent}, #{nboardInsert}, #{nboardUpdate}, #{nboardDelete}, #{nboardViews})
	</insert>
	
	<!-- NBOARD update -->
	<update id="updateNboard" parameterType="nboard">
	    UPDATE NBOARD
	    SET NBOARD_TITLE = #{nboardTitle},
	        NBOARD_CONTENT = #{nboardContent},
	        NBOARD_UPDATE = SYSDATE,
	        NBOARD_INSERT = #{nboardInsert},
	        NBOARD_DELETE = #{nboardDelete},
	        NBOARD_VIEWS = #{nboardViews}
	    WHERE NBOARD_NO = #{nboardNo} AND NBOARD_DELETE IS NULL
	</update>
	
	<!-- NBOARD delete -->
	<update id="deleteNboard" parameterType="_int">
	    UPDATE NBOARD SET NBOARD_DELETE = SYSDATE WHERE NBOARD_NO = #{nboardNo} AND NBOARD_DELETE IS NULL
	</update>
	
	<!-- NBOARD select -->
	<select id="selectNboard" parameterType="_int" resultMap="nboardResultSet">
	    SELECT * FROM NBOARD WHERE NBOARD_NO = #{nboardNo} AND NBOARD_DELETE IS NULL
	</select>
	
	<!-- NATTACHMENT selectList -->
	<select id="selectNattachmentList" parameterType="_int" resultMap="nattachmentResultMap">
	    SELECT * FROM NATTACHMENT WHERE NBOARD_NO = #{nboardNo} AND NATTACHMENT_LEVEL = 0
	</select>
	
	<!-- NATTACHMENT selectOne -->
	<select id="selectOneNattachment" parameterType="_int" resultMap="nattachmentResultMap">
	    SELECT * FROM NATTACHMENT WHERE NATTACHMENT_NO = #{nattachmentNo}
	</select>
	
	<!-- NATTACHMENT insert -->
	<insert id="insertNattachment" parameterType="nattachment">
	    INSERT INTO NATTACHMENT(NATTACHMENT_NO, NBOARD_NO, NATTACHMENT_ORIGIN, NATTACHMENT_CHANGE, NATTACHMENT_PATH, NATTACHMENT_INSERT, NATTACHMENT_LEVEL)
	    VALUES(SEQ_NATTACHMENT.NEXTVAL, #{nboardNo}, #{nattachmentOrigin}, #{nattachmentChange}, #{nattachmentPath}, #{nattachmentInsert}, #{nattachmentLevel})
	</insert>
	
	<!-- NATTACHMENT update -->
	<update id="updateNattachment" parameterType="nattachment">
	    UPDATE NATTACHMENT
	    SET NBOARD_NO = #{nboardNo},
	        NATTACHMENT_ORIGIN = #{nattachmentOrigin},
	        NATTACHMENT_CHANGE = #{nattachmentChange},
	        NATTACHMENT_PATH = #{nattachmentPath},
	        NATTACHMENT_INSERT = #{nattachmentInsert},  
	        NATTACHMENT_LEVEL = #{nattachmentLevel}
	    WHERE NATTACHMENT_NO = #{nattachmentNo}
	</update>
	
	<!-- NATTACHMENT delete -->
	<delete id="deleteNattachment" parameterType="_int">
	    DELETE FROM NATTACHMENT WHERE NATTACHMENT_NO = #{nattachmentNo}
	</delete>
		
</mapper>
